<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../../">
  <title data-ice="title">src/client/com.e750/lib/core.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">client/com.e750</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ui">ui</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">client/com.e750/lib</div><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-jst">jst</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-net">net</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-storage">storage</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">client/com.e750/lib/behaviors</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Evented">Evented</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Initializable">Initializable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Progressable">Progressable</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">client/com.e750/lib/classes/collections</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/classes/collections/Collection.js~Collection.html">Collection</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/classes/collections/Product.js~ProductCollection.html">ProductCollection</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">client/com.e750/lib/classes/models</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/classes/models/Model.js~Model.html">Model</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/classes/models/Product.js~Product.html">Product</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">client/com.e750/lib/classes/views</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/classes/views/View.js~View.html">View</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">client/com.e750/lib/components</div><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/components/AddToCart.js~AddToCart.html">AddToCart</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/components/Application.js~Application.html">Application</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/components/Carousel.js~Carousel.html">Carousel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/components/Component.js~Component.html">Component</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/components/Header.js~Header.html">Header</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/components/Product.js~Product.html">Product</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/client/com.e750/lib/components/ProductList.js~ProductList.html">ProductList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Resolver">Resolver</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">client/com.e750/lib/event</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Dispatcher">Dispatcher</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-nEvent">nEvent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Registry">Registry</a></span></span></li>
<li data-ice="doc"><div data-ice="dirPath" class="nav-dir-path">client/com.e750/lib/util</div><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-htmlToDom">htmlToDom</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isElement">isElement</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isNode">isNode</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-addHandler">addHandler</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isNativeEvent">isNativeEvent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-manageNativeEvents">manageNativeEvents</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-removeHandler">removeHandler</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-guid">guid</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-mixes">mixes</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-ElementPrototypeRemove">ElementPrototypeRemove</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-NodeListPrototypeRemove">NodeListPrototypeRemove</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-LookupTable">LookupTable</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/client/com.e750/lib/core.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import templeton from &apos;templeton&apos;;
import Evented from &apos;./behaviors/Evented&apos;;
import {htmlToDom} from &apos;./util/DOMUtils&apos;;
import Evt from &apos;./event/Registry&apos;;

require(&apos;whatwg-fetch&apos;);


export const net = {
    http: {
        /**
         * Base NET request function
         * returns an A+ promise
         * @param options
         * @returns {*}
         */
        exec: function (url, options) {
            console.info(&apos;FETCH&apos;, url, options);
            function checkStatus (response) {
                if (response.status &gt;= 200 &amp;&amp; response.status &lt; 300 || response === 0 /*local file*/) {
                    return response;
                } else {
                    return Promise.reject(new Error(response.statusText));
                }
            }

            function parseResponse (response) {
                var contentType = response.headers.get(&apos;content-type&apos;);
                if (contentType &amp;&amp; contentType.indexOf(&apos;application/json&apos;) !== -1) {
                    return response.json();
                }
                return response.text();
            }

            this.emit(Evt.BEFORE_FETCH, options);
            return fetch(url, options).then(checkStatus).then(parseResponse);
        },
        /**
         * GET, POST, PUT, DELETE methods
         * @param String url
         * @param Object options
         * @returns native promises
         */

        getJSON: function (url, options) {
            Object.assign(options, {
                method: &apos;GET&apos;,
                headers: Object.assign(options.headers, {
                    &apos;Accept&apos;: &apos;application/json&apos;,
                    &apos;Content-Type&apos;: &apos;application/json&apos;
                })
            });
            return net.http.exec.call(this, url, options);
        },

        postJSON: function (url, data, options) {
            Object.assign(options, {
                method: &apos;POST&apos;,
                headers: Object.assign(options.headers, {
                    &apos;Accept&apos;: &apos;application/json&apos;,
                    &apos;Content-Type&apos;: &apos;application/json&apos;
                }),
                body: JSON.stringify(data)
            });
            return net.http.exec.call(this, url, options);
        },

        get: function (url, options) {
            options.method = &apos;GET&apos;;
            return net.http.exec.call(this, url, options);
        },

        post: function (url, options) {
            options.method = &apos;POST&apos;;
            return net.http.exec.call(this, url, options);
        },

        put: function (url, options) {
            options.method = &apos;PUT&apos;;
            return net.http.exec.call(this, url, options);
        },

        del: function (url, options) {
            options.method = &apos;DELETE&apos;;
            return net.http.exec.call(this, url, options);
        }
    }
};

export const storage = {

    cookie: (name, value, options) =&gt; {

        function encode (val) {
            try {
                return encodeURIComponent(val);
            } catch (e) {
                return null;
            }
        }

        function decode (val) {
            try {
                return decodeURIComponent(val);
            } catch (e) {
                return null;
            }
        }

        function set (key, val) {
            let opts = arguments[2] === undefined ? {} : arguments[2];

            var str = &apos;&apos; + encode(key) + &apos;=&apos; + encode(val);

            if (val === null) options.maxage = -1;

            if (opts.maxage) {
                opts.expires = new Date(+new Date() + opts.maxage);
            }

            if (opts.path) str += &apos;; path=&apos; + opts.path;
            if (opts.domain) str += &apos;; domain=&apos; + opts.domain;
            if (opts.expires) str += &apos;; expires=&apos; + opts.expires.toUTCString();
            if (opts.secure) str += &apos;; secure&apos;;

            document.cookie = str;
        }

        function get (key) {
            var cookies = parse(document.cookie);
            return !!key ? cookies[key] : cookies;
        }

        function parse (str) {
            var obj = {},
                pairs = str.split(/ *; */);

            if (!pairs[0]) {
                return obj;
            }
            var _iteratorNormalCompletion = true;
            var _didIteratorError = false;
            var _iteratorError = undefined;
            var _iterator, _step;

            try {
                for (_iterator = pairs[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
                    var pair = _step.value;

                    pair = pair.split(&apos;=&apos;);
                    obj[decode(pair[0])] = decode(pair[1]);
                }
            } catch (err) {
                _didIteratorError = true;
                _iteratorError = err;
            } finally {
                try {
                    if (!_iteratorNormalCompletion &amp;&amp; _iterator.return) {
                        _iterator.return();
                    }
                } finally {
                    if (_didIteratorError) {
                        throw _iteratorError;
                    }
                }
            }

            return obj;
        }

        if (arguments.length &lt; 2) {
            return get(name);
        }

        set(name, value, options);
    }
};

export const jst = {
    templates: {},

    getFromDOM: (name) =&gt; {
        return document.getElementById(name).innerHTML;
    },

    compile: (templateStr, data, overrides) =&gt; {
        return htmlToDom(templeton.template(templateStr, data, overrides));
    }

};

export default {net, storage, jst};
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.3)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
